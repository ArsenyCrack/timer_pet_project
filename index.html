<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div>
        <h1>Timer</h1>
        <p id="timer"><input type="number" min="0" max="23" id="input-hour" placeholder = "00" onkeyup="input()">:<input type="number" min="0" max="59" id="input-minute" placeholder = "00" onkeyup="input()">:<input type="number" min="0" max="59" id="input-second" placeholder = "00" onkeyup="input()"></p>
        <input id="start-button" type="button" onclick="start()" value="Start">
        <input id="stop-button" type="button" onclick="stop()" value="Stop">
        <input id="reset-button" type="button" onclick="reset()" value="Reset">
    </div>
</body>
<script>
    const sleep = ms => new Promise(resolve => setTimeout(resolve, ms));
    var isStop = true;

    function input() {
        if (document.getElementById("input-hour").value > 23) {
            document.getElementById("input-hour").value = "23";
        }
        if (document.getElementById("input-minute").value > 59) {
            document.getElementById("input-minute").value = "59";
        }
        if (document.getElementById("input-second").value > 59) {
            document.getElementById("input-second").value = "59";
        }
        switch (document.getElementById("input-hour").value) {
            case "1":
                document.getElementById("input-hour").value = "01";
                break;
            case "2":
                document.getElementById("input-hour").value = "02";
                break;
            case "3":
                document.getElementById("input-hour").value = "03";
                break;
            case "4":
                document.getElementById("input-hour").value = "04";
                break;
            case "5":
                document.getElementById("input-hour").value = "05";
                break;
            case "6":
                document.getElementById("input-hour").value = "06";
                break;
            case "7":
                document.getElementById("input-hour").value = "07";
                break;
            case "8":
                document.getElementById("input-hour").value = "08";
                break;
            case "9":
                document.getElementById("input-hour").value = "09";
                break;
        }
        switch (document.getElementById("input-minute").value) {
            case "1":
                document.getElementById("input-minute").value = "01";
                break;
            case "2":
                document.getElementById("input-minute").value = "02";
                break;
            case "3":
                document.getElementById("input-minute").value = "03";
                break;
            case "4":
                document.getElementById("input-minute").value = "04";
                break;
            case "5":
                document.getElementById("input-minute").value = "05";
                break;
            case "6":
                document.getElementById("input-minute").value = "06";
                break;
            case "7":
                document.getElementById("input-minute").value = "07";
                break;
            case "8":
                document.getElementById("input-minute").value = "08";
                break;
            case "9":
                document.getElementById("input-minute").value = "09";
                break;
        }
        switch (document.getElementById("input-second").value) {
            case "1":
                document.getElementById("input-second").value = "01";
                break;
            case "2":
                document.getElementById("input-second").value = "02";
                break;
            case "3":
                document.getElementById("input-second").value = "03";
                break;
            case "4":
                document.getElementById("input-second").value = "04";
                break;
            case "5":
                document.getElementById("input-second").value = "05";
                break;
            case "6":
                document.getElementById("input-second").value = "06";
                break;
            case "7":
                document.getElementById("input-second").value = "07";
                break;
            case "8":
                document.getElementById("input-second").value = "08";
                break;
            case "9":
                document.getElementById("input-second").value = "09";
                break;
        }
        if (document.getElementById("input-hour").value > 9) {
            document.getElementById("input-hour").value = Math.round(document.getElementById("input-hour").value);
        }
        if (document.getElementById("input-minute").value > 9) {
            document.getElementById("input-minute").value = Math.round(document.getElementById("input-minute").value);
        }
        if (document.getElementById("input-second").value > 9) {
            document.getElementById("input-second").value = Math.round(document.getElementById("input-second").value);
        }
    }
    async function start() {
        if (isStop) {
            document.getElementById("input-hour").disabled = true;
            document.getElementById("input-minute").disabled = true;
            document.getElementById("input-second").disabled = true;
            isStop = false;
            var hour = document.getElementById("input-hour").value;
            var minute = document.getElementById("input-minute").value;
            var second = document.getElementById("input-second").value;
            var input_number = Math.round(hour) * 3600 + Math.round(minute) * 60 + Math.round(second);
            while (input_number > 0 && !isStop) {
                await sleep (500);
                input_number = input_number - 1;
                document.getElementById("input-second").value = document.getElementById("input-second").value - 1;
                document.getElementById("input-hour").value = Math.floor(input_number / 3600);
                document.getElementById("input-minute").value = Math.floor((input_number % 3600) / 60);
                document.getElementById("input-second").value = Math.floor(input_number % 60);
                if (document.getElementById("input-hour").value == 0) {
                    document.getElementById("input-hour").value = "00";
                }
                if (document.getElementById("input-minute").value == 0) {
                    document.getElementById("input-minute").value = "00";
                }
                if (document.getElementById("input-second").value == 0) {
                    document.getElementById("input-second").value = "00";
                }
                input();
                await sleep (500);
            }
        }
    }

    function stop() {
        isStop = true;
    }

    function reset() {
        isStop = true;
        input_number = 0;
        document.getElementById("input-hour").value = "00";
        document.getElementById("input-minute").value = "00";
        document.getElementById("input-second").value = "00";
        document.getElementById("input-hour").placeholder = "00";
        document.getElementById("input-minute").placeholder = "00";
        document.getElementById("input-second").placeholder = "00";
        document.getElementById("input-hour").disabled = false;
        document.getElementById("input-minute").disabled = false;
        document.getElementById("input-second").disabled = false;
    }
</script>
</html>
